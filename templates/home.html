{% extends 'base.html' %}
{% load static %}


{% block content %}
  <section class="jumbotron text-center home-profile">
    <div class="container">
  
      {% if user.user_image %}
      <a href=""><img  class="top-image-of-user" src="{{ MEDIA_URL }}{{ user.user_image }}" alt=""></a>
      {% else %}
      <a href=""><img  class="top-image-of-user" src="{{ MEDIA_URL }}images/default-user-image.png" alt=""></a>
      {% endif %}
  
      <h1 class="jumbotron-heading">{{ user.username }}</h1>
      {% if user.name %}
      <h4>{{ user.name }}</h4>
      {% endif %}
      <p class="ff-layout">
        <a href="{% url 'instagram:followee_list' pk=user.pk %}" class="following">フォロー{{ followee }}人</a>
        <a href="{% url 'instagram:follower_list' pk=user.pk %}" class="following">フォロワー{{ follower }}人</a>
      </p>
      <p>
        <a href="{% url 'instagram:post' %}" class="btn btn-primary my-2">投稿</a>
        <a href="{% url 'instagram:message_list' %}" class="btn btn-secondary my-2">メッセージ</a>
        {% if user.is_authenticated %}
        <a href="{% url 'instagram:user_profile' pk=user.pk %}" class="btn btn-secondary my-2">プロフィール</a>
        {% endif %}
      </p>
    </div>

    <div>
      <h4>通知一覧</h4>
      <p>メッセージがきています</p>
    </div>
    </section>

  
  <div class="all-posts-area">
    {% if tags %}
    <table class="table manage-candidates-top mb-0">
      <thead>
        <tr>
          <th>Tags</th>
        </tr>
      </thead>
      {% for tag in tags %}
        <tbody style="background-color: #fff;">
          <tr class="candidates-list">
            <td class="title">
              <div class="thumb">
                <a href="{% url 'instagram:home' %}"><img class="img-fluid" src="{{ MEDIA_URL }}/app_images/hashtag.jpeg" style="width: 40px; height: 40px;" alt=""></a>
              </div>
            </td>
            <td>
              <div class="candidate-list-details">
                <div class="candidate-list-info">
                  <div class="candidate-list-title">
                    <p class="mb-0"><a href="{% url 'instagram:tag_post_list' tag=tag.name %}" style="text-decoration: none; color: black;">{{ tag.name }}</a></p>
                  </div>
                </div>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% elif object_list %}
      {% for post in object_list %}
      <div class="posts-area">
        <div class="card post-card mb-4 shadow-sm">
          <h5><a href="{% url 'instagram:user_profile' pk=post.author.pk %}" class="post-username-a">{{ post.author }}</a></h5>
          <div>
            <img  src="{{ MEDIA_URL }}{{ post.image }}" class="post-image bd-placeholder-img card-img-top" >
            {% if post.text %}
            <p>{{ post.text }}</p>
            {% endif %}
            {% if post.tag%}
            <a href="" style="text-decoration: none; color: rgb(48, 96, 230);">{{ post.tag }}</a>
            {% endif %}
          </div>
          <div class="card-body">
            <p class="card-text"></p>
            <div class="d-flex justify-content-between align-items-center">
              <div class="btn-group">
                  <a href="{% url 'instagram:like_post' pk=post.pk %}" style="text-decoration: none;"><span class="like-button">&#9825;</span></a>
                  <a href="{% url 'instagram:like_post' pk=post.pk %}" style="text-decoration: none;"><span class="like-button">&hearts;</span></a>
                  <p class="good-count">{{ post.like_count }}件のいいね</p>
                <a href="{% url 'instagram:comment_to_post' pk=post.pk %}" class="see-more">コメントする</a>
                <a href="{% url 'instagram:post_detail' pk=post.pk %}" class="see-more">もっと見る</a>
              </div>
              <small class="text-muted"></small>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    {% else %}
    <p>投稿はありません</p>
    {% endif %}

    <div class="col-6 offset-3 justify-content-center">
      {% if is_paginated %}
          {% include 'pagination.html' %}
      {% endif %}
    </div>

  </div>

  
  {% endblock content %}